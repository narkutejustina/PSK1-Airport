<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"

>
<h:head>
    <title>PSK</title>
</h:head>

<h:body>
    <h1>Airlines</h1>

    <h:link outcome="flights">Add new flight</h:link>

    <br/>
    <br/>
    <h:link outcome="passengers">Add new passenger</h:link>

    <br/>
    <br/>
    <p:fieldset legend="Airports" collapsed="true" toggleable="true" style="width: 90%">
        <p:dataTable value="#{indexController.getAirports()}" var="airport">
            <p:column headerText="Code">
                <h:outputText value="#{airport.code}" />
            </p:column>
            <p:column headerText="Title">
                <h:outputText value="#{airport.title}" />
            </p:column>
            <p:column headerText="City">
                <h:outputText value="#{airport.city}" />
            </p:column>
            <p:column headerText="Country">
                <h:outputText value="#{airport.country}" />
            </p:column>
            <p:column headerText="Arrivals">
                <h:outputText value="#{airport.arrivalFlights.size()}" />
            </p:column>
            <p:column headerText="Departures">
                <h:outputText value="#{airport.departureFlights.size()}" />
            </p:column>



        </p:dataTable>
    </p:fieldset>
    <br/>
    <p:fieldset legend="Passengers" collapsed="true" toggleable="true">
        <p:dataTable id="data" value="#{passengersController.getPassengers()}" var="passenger">
            <p:column headerText="Personal Code">
                <h:outputText value="#{passenger.personalCode}" />
            </p:column>
            <p:column headerText="First name">
                <h:outputText value="#{passenger.name}" />
            </p:column>
            <p:column headerText="Last name">
                <h:outputText value="#{passenger.surname}" />
            </p:column>
            <p:column headerText="Total bookings">
                <h:outputText value="#{passenger.flights.size()}" />
            </p:column>
            <p:column headerText="Last booked flight">
                <h:outputText
                        value="#{passengersController.getLastFlightString(passenger.personalCode)}" />
            </p:column>
        </p:dataTable>
    </p:fieldset>
    <br/>
    <p:fieldset legend="Flights" collapsed="true" toggleable="true">
        <p:dataTable value="#{flightsController.flights}" var="flight">
            <p:column headerText="Departure">
                <h:outputText value="#{flight.departureAirport.code}-#{flight.departureAirport.title}" />
            </p:column>
            <p:column headerText="Arrival">
                <h:outputText value="#{flight.arrivalAirport.code}-#{flight.arrivalAirport.title}" />
            </p:column>
            <p:column headerText="Date">
                <h:outputText value="#{flight.getStringDate()}" />
            </p:column>
            <p:column headerText="Duration (min)">
                <h:outputText value="#{flight.duration}" />
            </p:column>
            <p:column headerText="Passengers">
                <h:outputText value="#{flight.passengers.size()}" />
            </p:column>
        </p:dataTable>
    </p:fieldset>



    <p:fieldset legend="Flights mb" collapsed="true" toggleable="true">
        <p:dataTable value="#{useCaseController.getFlights()}" var="flightB">
            <p:column headerText="Id">
                <h:outputText value="#{flightB.id}" />
            </p:column>
            <p:column headerText="Date">
                <h:outputText value="#{flightB.stringDate}" />
            </p:column>
            <p:column headerText="Duration (min)">
                <h:outputText value="#{flightB.duration}" />
            </p:column>
            <p:column headerText="Passengers">
                <ui:repeat var="p" value="#{flightB.passengers}">
                    <h:outputText value="#{p.name} #{p.surname} ;" />
                </ui:repeat>
            </p:column>
        </p:dataTable>
    </p:fieldset>

</h:body>
</html>